##### Variables #####
SECOND 1000

##### Global Simulation Parameters #####
random.seed 1234567890
simulation.experiments 1
simulation.endtime 60 * SECOND
simulation.logtime 5 * SECOND
network.size 1

##### Protocols #####
protocol.urt UniformRandomTransport
{
    mindelay 45
    maxdelay 55
}
protocol.tr UnreliableTransport
{
    transport urt
    drop 0
}
protocol.dht KademliaProtocol
{
    transport tr
}
protocol.flashcrowd FlashcrowdProtocol
{
    dht dht
}

##### Initialization #####
init.nodeId CustomDistribution
{
    protocol dht
}
init.state StateBuilder
{
    protocol dht
}
init.nw InitNetwork
{
    protocol flashcrowd
    dht dht
}

##### Control #####
control.generator TrafficGenerator
{
    protocol dht
    step SECOND
    from 1000
    until 50000
}

##### Network Churn #####
control.flashcrowd Turbulence
{
    protocol dht
    transport tr
    maxsize 2000
    max_change 30
    p_rem 0
    p_add 1

    step SECOND

    init.0 CustomDist
    {
        dht dht
    }
    init.1 InitNode
    {
        protocol flashcrowd
        dht dht
    }
}

control.churn Turbulence
{
    protocol dht
    transport tr
    minsize 100
    delay_start 10 * SECOND
    max_change 10
    p_rem 1
    p_add 0

    step SECOND
}

##### Livestream P2P #####
btp.stream.substreams 7
btp.system.init_capacity 10
btp.peer.capacity 6